<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Transition probabilities</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-random@3"></script>
    <script type="text/javascript" id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
    </script>
</head>
<style>
    .centered-container {
        width: 50vw;
        margin-left: 25vw;
        text-align: left;
        padding: 2rem;
        background-color: white;
    }

    .content-container {
        display: flex;
        gap: 2rem;
        align-items: center; /* vertically align */
    }

    .sliders-column {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .chart-column {
        flex-grow: 1;
    }

    @font-face {
        font-family: "UFCSans";
        src: url("../fonts/UFCSans-Regular.woff2") format("woff2");
    }

    @font-face {
        font-family: "UFCSans";
        src: url("../fonts/UFCSans-Bold.woff2") format("woff2");
        font-weight: bold;
    }

    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        font-size: 18px;
        font-family: "UFCSans", Arial, sans-serif;
        background: #f3f3f3;
    }

    svg text {
        font-family: "UFCSans", Arial, sans-serif;
    }

    .slider-container {
        margin-bottom: 1em;
    }

    .slider-label {
        display: block;
        margin-bottom: 4px;
        font-weight: bold;
        text-align: center;
    }

    .input-with-value {
        display: flex;
        align-items: center;
        gap: 0.5em;
    }

    .sliderValue {
        min-width: 2em;
        text-align: right;
    }

    #redRange::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 10px;
        height: 10px;
        background: red;
        border-radius: 50%;
        border: none;
        cursor: pointer;
    }

    #redRange::-moz-range-thumb {
        width: 10px;
        height: 10px;
        background: red;
        border-radius: 50%;
        border: none;
        cursor: pointer;
    }

    #redRange::-moz-range-progress {
        background: red;
    }

    #blueRange::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 10px;
        height: 10px;
        background: blue;
        border-radius: 50%;
        border: none;
        cursor: pointer;
    }

    #blueRange::-moz-range-thumb {
        width: 10px;
        height: 10px;
        background: blue;
        border-radius: 50%;
        border: none;
        cursor: pointer;
    }

    #blueRange::-moz-range-progress {
        background: blue;
    }

    input[type=range] {
        appearance: none;
        width: 200px; /* wider than before */
        height: 6px;
        background: #ddd;
        border-radius: 5px;
        outline: none;
    }


    svg text, body text {
        font-size: 14px; /* or whatever size you prefer */
    }


    #pmf-chart {
        display: block;
        margin: 20px auto;
    }

    .centered-math {
        text-align: center;
        font-size: 0.9em; /* optional: makes the formula more readable */
        margin: 1em 0;
    }

    .inline-math {
        font-size: 0.9em; /* optional: makes the formula more readable */
        margin: 1em 0;
    }

</style>
<body>
<div class="centered-container">
    <h2>Transition probabilities</h2>
    <p>
        With the help of Bayesian inference, attack and defence parameters are estimated for each of the fighters'
        skills. These posterior estimates are used to calculate the transition probabilities between different states /
        actions. <br>
    </p>
    <p>
        The number of strikes landed by fighter <i>blue</i>, <span class="inline-math">\( \text{k} \)</span>, depends on
        the number of strikes attempted
        by fighter <i>blue</i>, <span class="inline-math">\( \text{n} \)</span>, and the corresponding skill parameters
        of the fighters, <span class="inline-math">\( \lambda_{blue} \)</span>, and
        <span class="inline-math">\( \lambda_{red} \)</span>.
        The striking accuracy is modelled with the help of the binomial distribution:
    </p>
    <p class="centered-math">
        \( \text{k} \sim \text{Binomial}(\text{n}, \theta) \)
    </p>
    <p>
        The transition probabilities, <span class="inline-math">\( \theta \)</span>, lie in the interval <span
            class="inline-math">\([0, 1]\)</span> whereas the skill coefficients lie in
        the interval &#8477. By applying the inverse logit, real numbers are transformed into probabilities.
    </p>
    <div class="content-container">
        <div class="sliders-column">
            <div class="slider-container">
                <label class="slider-label">\(\lambda_{blue} \)</label>
                <div class="input-with-value">
                    <input type="range" id="blueRange" min="0" max="10" value="5" step="0.1">
                </div>
            </div>
            <div class="slider-container">
                <label class="slider-label">\(\lambda_{red} \)</label>
                <div class="input-with-value">
                    <input type="range" id="redRange" min="0" max="10" value="5" step="0.1">
                </div>
            </div>
        </div>

        <div class="chart-column">
            <svg></svg>
        </div>
    </div>
    <p>The probability mass function of the binomial distribution helps us to calculate the probability of getting
        exactly <span class="inline-math">\( k \)</span> strikes landed in <span class="inline-math">\( n = 50 \)</span>
        strikes attempted:</p>
    <svg id="pmf-chart"></svg>
    <footer>
        <hr>
        <p id="methodology">
            <sup><i>mmarkov</i> uses a special reparameterization of the beta-binomial and the negative binomial
                distribution for all the skill models.
                In addition, priors are informative and correlation is allowed between the skills.</sup>
        </p>
    </footer>
    <p>
    </p>

</div>
</body>
<script type="module" src="slider.js"></script>
<script type="module" src="charts.js"></script>
<script type="module" src="data.js"></script>
</html>